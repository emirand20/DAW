<html>

<body>
    <div id="mapdiv" style="width:90%; height:90%"></div>
    <script src="https://www.openlayers.org/api/OpenLayers.js"></script>
    <script>
        let lat = 2.1743558
        let lon = 41.4036299
        const zoom = 17;
        let popUp = "<div><h3>Sagrada Familia</h3> <table><tr><td>Horario:</td><td>Lunes a domingo, 9:00-18:00</td></tr><tr><td>Dirección:</td><td>Carrer de Mallorca, 401, 08013 Barcelona</td></tr><tr><td>Teléfono:</td><td>+34 932 07 30 31</td></tr></table></div>";
        
        map = new OpenLayers.Map("mapdiv");
        map.addLayer(new OpenLayers.Layer.OSM());

        const lonLat = new OpenLayers.LonLat(lat, lon).transform(
            new OpenLayers.Projection("EPSG:4326"),
            map.getProjectionObject()
        );

        const markers = new OpenLayers.Layer.Markers("Markers");
        map.addLayer(markers);

        const marker = new OpenLayers.Marker(lonLat);
        markers.addMarker(marker);

        marker.events.register("mousedown", marker, function () {

            let coordenadas = new OpenLayers.LonLat(2.1743558, 41.4036299)
                .transform(
                    new OpenLayers.Projection("EPSG:4326"),
                    map.getProjectionObject()
                );

            let popup = new OpenLayers.Popup("popup",coordenadas,new OpenLayers.Size(200, 100),popUp,true);

            // Mostrar la ventana emergente en el mapa
            map.addPopup(popup);

        });

        map.setCenter(lonLat, zoom);
    </script>
</body>

</html>