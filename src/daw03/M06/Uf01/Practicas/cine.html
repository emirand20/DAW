<script>
    class Cine {
        constructor(stringQR) {
            this.stringQR = stringQR
            this.personas = this.getPersonas()
            this.fechaYHoras = this.getfechaHora()
            this.diaEntrada = this.getDiaEntrada()
            this.hEntrada = this.getHoraEntrada()
            this.concat = this.getConcatenacion()
            this.dia = this.getDia()
            this.time = this.getHorario()
            this.precioEntrada = this.getPrecio()
            console.log(
                "Personas:", this.personas,
                "Dia:", this.dia,
                "Hora:", this.time,
                "Precio:", this.precioEntrada, "euros.")
        }
        getPersonas() {
            return this.personas = this.stringQR.split('/')[0]
        }
        getfechaHora() {
            this.fechaYHoras = this.stringQR.split('/')
            return this.fechaYHoras.splice(1)
        }
        getDiaEntrada() {
            //slice() insertar y/o extraer elementos  
            let fecha = this.fechaYHoras.slice(0, 3)
            let dia = fecha[0]
            fecha[0] = fecha[2]
            fecha[2] = dia
            this.diaEntrada = fecha.toString()
            this.diaEntrada = '20' + this.diaEntrada
            return this.diaEntrada = this.diaEntrada.replaceAll(',', '-')
        }
        getHoraEntrada() {
            let hora = this.fechaYHoras.slice(3, 5)
            this.hEntrada = hora.toString()
            return this.hEntrada = this.hEntrada.replaceAll(',', ':')
        }
        getConcatenacion() {
            return this.concat = this.diaEntrada.concat(' ', this.hEntrada)
        }
        getDia() {
            this.dia = new Date(this.concat)
            Date.nombreDia = ['domingo', 'lunes', 'martes', 'miércoles', 'jueves', 'viernes', 'sábado'];
            return this.dia = Date.nombreDia[this.dia.getDay()]
        }
        getHorario() {
            this.time = new Date(this.concat)
            return this.time = this.time.getHours()
        }
        getPrecio() {
            let horarioMañana = 7
            let horarioNocturno = 9
            let sabado = 0.2
            let domingo = 0.1
            let miercoles = 0.1
            
            /*OPERADOR TERNARIO
            expresión_condicional ? expresion1 : expresion2;*/

            //horario sin descuentos calculanto el precio total
            //(this.personas < 5 && this.time < 19) ? horarioMañana * this.personas : horarioNocturno * this.personas;
            if (this.personas < 5 && this.time < 19) {
                if(this.dia != 'sábado' && this.dia != 'domingo' && this.dia != 'miércoles'){
                    return this.precioEntrada = horarioMañana * this.personas
                }
                if(this.dia = 'sábado'){
                    return this.precioEntrada = horarioMañana * this.personas + sabado
                }
                if(this.dia = 'domingo'){
                    return this.precioEntrada = horarioMañana * this.personas + domingo
                }
                if(this.dia = 'miércoles'){
                    return this.precioEntrada = horarioMañana * this.personas - miercoles
                }
            }
            if (this.personas < 5 && this.time >= 19) {
                if(this.dia != 'sábado'){
                    return this.precioEntrada = horarioNocturno * this.personas 
                }
                return this.precioEntrada = horarioNocturno * this.personas + sabado

            }
            //descuentos de 5 o mas personas 
            if (this.personas < 10 && this.personas >= 5 && this.time < 19) {
                if(this.dia != 'sábado'){
                    this.precioEntrada = horarioMañana - 1.05
                    return this.precioEntrada *= this.personas
                }
                return this.precioEntrada = (horarioMañana * this.personas) + sabado
            }
            if (this.personas < 10 && this.personas >= 5 && this.time >= 19) {
                if(this.dia != 'sábado'){
                this.precioEntrada = horarioNocturno - 0.9
                return this.precioEntrada *= this.personas
                }
                return this.precioEntrada = horarioNocturno * this.personas + sabado
            }
            //descuento de 10 o mas personas
            if (this.personas >= 10 && this.time < 19) {
                if(this.dia != 'sábado'){
                    this.precioEntrada = horarioMañana - 1.4
                    return this.precioEntrada *= this.personas
                }
                return this.precioEntrada = horarioMañana * this.personas + sabado
            }
            if (this.personas >= 10 && this.time >= 19) {
                if(this.dia != 'sábado'){
                    this.precioEntrada = horarioNocturno - 1.35
                    return this.precioEntrada *= this.personas
                }
                return this.precioEntrada = horarioNocturno * this.personas + sabado
            }
        }
    }
    let entradaCine = new Cine("1/8/10/22/11/00")
    let entradaCine2 = new Cine("5/8/09/18/12/15")
    let entradaCine3 = new Cine("8/19/11/22/19/15")
</script>