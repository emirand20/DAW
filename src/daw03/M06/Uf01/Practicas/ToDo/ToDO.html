<!DOCTYPE html>
<html lang="en">
<style>
  .hidden {
    display: none;
  }

  ul span.checked {
    text-decoration: line-through;
  }

  ul div.eliminaTarea {
    display: none;
  }
</style>

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>To Do</title>
</head>

<body style="text-align:center">

  <h1 style="text-align:center">To Do List</h1>
  <input type="text" id="input" placeholder="Agrega elementos a la lista" />
  <button onclick="añadirInput()">Agrega a la lista</button>
  <button onclick="editarList()" id="elimina" class="is-hidden">Borra cualquier elemento</button>
  <button onclick="verTodosElementosLI()">Ver todos los elemetos</button>

  <ul id="lista"></ul>
</body>

<script>
  const lista = document.getElementsByTagName('div')

//crearemos un div que tenga un input checkbox y fuera del imput
function añadirInput() {
    let div = document.createElement('div')

    let checkbox = document.createElement('input')
    checkbox.setAttribute('type', 'checkbox')

    let span = document.createElement('span')

    checkbox.addEventListener('change', function (event) {
        if (event.currentTarget.checked) {
            span.classList.add('checked')
        } else {
            span.classList.remove('checked')
        }
    })

    let añadirTarea = document.getElementById('input').value //conectamos el input 
    let nuevaTarea = document.createTextNode(añadirTarea)
    span.appendChild(nuevaTarea)

    let button = document.createElement("button")

    const addClass = () => div.classList.add('eliminaTarea')
    button.addEventListener('click', addClass)

    let boton_toggle = document.getElementById("elimina")

    if (boton_toggle.classList.contains('is-hidden')) {
        button.classList.add('hidden');
    }

    button.classList.add('boton_borrar');
    let txt = document.createTextNode(" \u00D7")
    button.appendChild(txt)

    if (div.classList.contains('')) {
        div.classList.add('eliminaTarea')
    }

    if (añadirTarea === '') {
        alert('Añade una tarea');
    } else {
        div.appendChild(checkbox)
        div.appendChild(span)
        div.appendChild(button)
        document.getElementById('lista').appendChild(div)

    }
    document.getElementById('input').value = ''
}

function editarList() {
    let boton_toggle = document.getElementById("elimina")

    if (boton_toggle.classList.contains('is-hidden')) {
        boton_toggle.classList.remove('is-hidden')
    } else {
        boton_toggle.classList.add('is-hidden')
    }

    let botones = document.getElementsByClassName('boton_borrar')
    for (let i = 0; i < botones.length; i++) {
        if (botones.item(i).classList.contains('hidden')) {
            botones.item(i).classList.remove('hidden')
        } else {
            botones.item(i).classList.add('hidden')
        }
    }
}

function verTodosElementosLI() {
    let elementoLista = document.getElementsByTagName('div')

    for (let i = 0; i < elementoLista.length; i++) {
        if(elementoLista[i].classList.contains('eliminaTarea')){
            elementoLista[i].classList.remove('eliminaTarea')
        }
        
    }
}
</script>

</html>