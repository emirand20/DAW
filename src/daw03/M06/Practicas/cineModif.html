<script>
    
    class Cine {
        constructor(stringQR) {
            this.precioSesionMatutina = 7
            this.precioSesionNocturna = 9
            this.stringQR = stringQR
            this.personas = null
            this.dia = null // 0->domingo ...
            this.hora = null //hora del dia en formato 0-23
      
            this.precioUnitarioEntrada = null
            this.precioTotal = null
            this.setPersonas()
            this.setDiaHora()
            this.setPrecioUnitarioEntrada()
            this.setPrecioTotal()
        
            console.log(
                "Personas:",this.personas, 
                "Numeros de día (0-6):", this.dia, 
                "Hora:" , this.hora, 
                "Precio unitario:", this.precioUnitarioEntrada,
                "Precio total:" , this.precioTotal)
            
        }
        setPersonas() {
            this.personas = this.stringQR.split('/')[0]
        }
        setDiaHora() {
            const aQr = this.stringQR.split('/')
            let mes = aQr[2]
            if (mes.length == 1) {
                mes = '0' + mes
            }
            let dia = aQr[1]
            if (dia.length == 1) {
                dia = '0' + dia
            }
            const strDate = `20${aQr[3]}-${mes}-${dia} ${aQr[4]}:${aQr[5]}`
            
            const date = new Date(strDate)
            this.hora = date.getHours()
            this.dia = date.getDay()
        }
        setPrecioUnitarioEntrada() {
            if (this.hora < 19) {
                this.precioUnitarioEntrada = this.precioSesionMatutina
            } else {
                this.precioUnitarioEntrada = this.precioSesionNocturna
            }
            if (this.dia == 6) {//sábado
                this.precioUnitarioEntrada += this.precioUnitarioEntrada * 0.2
            }
            if (this.dia == 0) {//domingo
                this.precioUnitarioEntrada += this.precioUnitarioEntrada * 0.1
            }
        }
        setPrecioTotal() {
            this.precioTotal = this.precioUnitarioEntrada * this.personas
            if ( !(this.dia == 3 || this.dia == 6) ) {
                if (this.personas > 4 && this.personas < 10 && this.hora < 19) {
                    this.precioTotal -= this.precioTotal * 0.15
                }
                if (this.personas > 4 && this.personas < 10 && this.hora > 18) {
                    this.precioTotal -= this.precioTotal * 0.1
                }
                if (this.personas > 9 && this.hora < 19) {
                    this.precioTotal -= this.precioTotal * 0.2
                }
                if (this.personas > 9 && this.hora > 18) {
                    this.precioTotal -= this.precioTotal * 0.15
                }
            }
            if (this.dia == 3) {
                this.precioTotal -= this.precioTotal*0.1
                if (this.personas > 4 && this.personas < 10 && this.hora < 19) {
                    this.precioTotal -= this.precioTotal * 0.07
                }
                if (this.personas > 4 && this.personas < 10 && this.hora > 18) {
                    this.precioTotal -= this.precioTotal * 0.02
                }
                if (this.personas > 9 && this.hora < 19) {
                    this.precioTotal -= this.precioTotal * 0.04
                }
                if (this.personas > 9 && this.hora > 18) {
                    this.precioTotal -= this.precioTotal * 0.08
                }

            }
        }

    }
    let entradaCine = new Cine("2/8/10/22/12/00")
    let entradaCine2 = new Cine("9/12/9/18/23/15")
    let entradaCine3 = new Cine("18/5/11/22/16/15")
</script>